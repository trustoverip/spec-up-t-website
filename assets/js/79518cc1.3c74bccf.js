"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4422],{28453:(e,n,o)=>{o.d(n,{R:()=>s,x:()=>a});var r=o(96540);const i={},t=r.createContext(i);function s(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(t.Provider,{value:n},e.children)}},66954:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"developer-documentation/setting-up-environment/sonarqube","title":"SonarQube","description":"SonarQube is a leading open-source platform for continuous inspection of code quality. It provides automated analysis of source code to identify bugs, vulnerabilities, code smells, and security hotspots. Integrating SonarQube into your development workflow helps ensure high code quality, maintainability, and adherence to best practices throughout your project lifecycle.","source":"@site/docs/developer-documentation/setting-up-environment/sonarqube.md","sourceDirName":"developer-documentation/setting-up-environment","slug":"/developer-documentation/setting-up-environment/sonarqube","permalink":"/spec-up-t-website/docs/developer-documentation/setting-up-environment/sonarqube","draft":false,"unlisted":false,"editUrl":"https://github.com/blockchainbird/spec-up-t-website/tree/main/docs/developer-documentation/setting-up-environment/sonarqube.md","tags":[],"version":"current","lastUpdatedBy":"Kor Dwarshuis","lastUpdatedAt":1759487920000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Local test environment","permalink":"/spec-up-t-website/docs/developer-documentation/setting-up-environment/local-test-environment"},"next":{"title":"Specref.org","permalink":"/spec-up-t-website/docs/category/specreforg"}}');var i=o(74848),t=o(28453);const s={sidebar_position:1},a="SonarQube",l={},c=[{value:"Configuring SonarQube in Visual Studio Code (macOS)",id:"configuring-sonarqube-in-visual-studio-code-macos",level:2},{value:"1. Configure Connected Mode",id:"1-configure-connected-mode",level:3},{value:"2. Create <code>sonar-project.properties</code>",id:"2-create-sonar-projectproperties",level:3},{value:"3. Set Up Environment Variable",id:"3-set-up-environment-variable",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"1",id:"1",level:3},{value:"2",id:"2",level:3}];function d(e){const n={admonition:"admonition",code:"code",div:"div",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"sonarqube",children:"SonarQube"})}),"\n",(0,i.jsx)(n.p,{children:"SonarQube is a leading open-source platform for continuous inspection of code quality. It provides automated analysis of source code to identify bugs, vulnerabilities, code smells, and security hotspots. Integrating SonarQube into your development workflow helps ensure high code quality, maintainability, and adherence to best practices throughout your project lifecycle."}),"\n",(0,i.jsx)(n.h2,{id:"configuring-sonarqube-in-visual-studio-code-macos",children:"Configuring SonarQube in Visual Studio Code (macOS)"}),"\n",(0,i.jsx)(n.p,{children:"Follow these steps to set up SonarQube analysis in VS Code on a modern macOS system:"}),"\n",(0,i.jsx)(n.h3,{id:"1-configure-connected-mode",children:"1. Configure Connected Mode"}),"\n",(0,i.jsxs)(n.p,{children:["Create a ",(0,i.jsx)(n.code,{children:".sonarlint/connectedMode.json"})," file in your project root with the following content:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "sonarCloudOrganization": "<your-organization>",\n  "projectKey": "<your-project-key>",\n  "region": "<your-region>"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Replace the placeholders with your actual SonarCloud organization, project key, and region."}),"\n",(0,i.jsxs)(n.h3,{id:"2-create-sonar-projectproperties",children:["2. Create ",(0,i.jsx)(n.code,{children:"sonar-project.properties"})]}),"\n",(0,i.jsxs)(n.p,{children:["Add a ",(0,i.jsx)(n.code,{children:"sonar-project.properties"})," file to your project with the following configuration:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"sonar.projectKey=<your-project-key>\nsonar.organization=<your-organization>\nsonar.host.url=https://sonarcloud.io\nsonar.token=SONAR_TOKEN\nsonar.exclusions=<comma-separated-list-of-paths-to-exclude>\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Replace the placeholders with your actual values."}),"\n",(0,i.jsxs)(n.li,{children:["Use the environment variable ",(0,i.jsx)(n.code,{children:"SONAR_TOKEN"})," for security."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Your ",(0,i.jsx)(n.code,{children:"sonar-project.properties"})," file should be committed to git."]}),"\n",(0,i.jsx)(n.p,{children:"Why?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"It contains project-specific SonarQube/SonarCloud configuration."}),"\n",(0,i.jsx)(n.li,{children:"It allows all contributors and CI systems to use the same analysis settings."}),"\n",(0,i.jsx)(n.li,{children:"It does not contain sensitive information (as long as you do not put your real token in it)."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Important:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Do not commit your actual SonarCloud token."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"3-set-up-environment-variable",children:"3. Set Up Environment Variable"}),"\n",(0,i.jsxs)(n.p,{children:["Add your SonarQube token to your shell environment by editing your ",(0,i.jsx)(n.code,{children:"~/.zshrc"})," file:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"export SONAR_TOKEN=<your-sonar-token>\n"})}),"\n",(0,i.jsx)(n.p,{children:"After saving the file, reload your shell configuration:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"source ~/.zshrc\n"})}),"\n",(0,i.jsx)(n.p,{children:"Your SonarQube setup is now complete. You can now run code analysis and benefit from continuous feedback on code quality directly within your development environment."}),"\n",(0,i.jsx)(n.p,{children:"To initiate a code quality analysis, run the following command in your project directory:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx sonarqube-scanner\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You can find the results of npx sonarqube-scanner in your browser at the dashboard URL shown in your report-task.txt file in the ",(0,i.jsx)(n.code,{children:".scannerwork"})," directory."]}),"\n",(0,i.jsx)(n.p,{children:"This dashboard shows the Quality Gate status, code issues, duplications, coverage, and more."}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"The scanner output in your terminal only shows the upload status, not the full analysis results."})}),"\n",(0,i.jsxs)(n.p,{children:["When you run ",(0,i.jsx)(n.code,{children:"npx sonarqube-scanner"}),", your local analysis results are uploaded to the remote SonarCloud server. The dashboardUrl in ",(0,i.jsx)(n.code,{children:".scannerwork/report-task.txt"})," points to the web dashboard where you can view the results of your latest analysis for your project."]}),"\n",(0,i.jsxs)(n.p,{children:["Add .scannerwork to your ",(0,i.jsx)(n.code,{children:".gitignore"})," file to ensure it is not tracked by git:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:".scannerwork/\n"})}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"1",children:"1"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"[ERROR] ScannerEngine: You are running manual analysis while Automatic Analysis is enabled. Please consider disabling one or the other.\n[ERROR] Bootstrapper: An error occurred: Error: Scanner engine failed with code 1\n"})}),"\n",(0,i.jsx)(n.p,{children:"You are seeing this error because SonarCloud Automatic Analysis is enabled for your project, but you are also trying to run a manual analysis with the scanner. SonarCloud does not allow both at the same time."}),"\n",(0,i.jsx)(n.p,{children:"How to fix:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Disable Automatic Analysis on SonarCloud:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Go to your project on SonarCloud."}),"\n",(0,i.jsx)(n.li,{children:"Navigate to Project Settings > Analysis Method."}),"\n",(0,i.jsx)(n.li,{children:"Switch from Automatic Analysis to CI-based analysis (manual)."}),"\n",(0,i.jsx)(n.li,{children:"Save your changes."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Now you can run the scanner manually:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Make sure you are in your project root."}),"\n",(0,i.jsxs)(n.li,{children:["Run: ",(0,i.jsx)(n.code,{children:"npx sonarqube-scanner"})]}),"\n",(0,i.jsx)(n.li,{children:"The error should be gone."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"2",children:"2"}),"\n",(0,i.jsxs)(n.p,{children:["If you want to disable local analysis, then comment out the lines in ",(0,i.jsx)(n.code,{children:"sonar-project.properties"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# sonar.projectKey=<your-project-key>\n# sonar.organization=<your-organization>\n# sonar.host.url=https://sonarcloud.io\n# sonar.token=SONAR_TOKEN\n# sonar.exclusions=<comma-separated-list-of-paths-to-exclude>\n"})}),"\n",(0,i.jsx)(n.div,{children:(0,i.jsxs)(n.p,{children:["Renaming ",(0,i.jsx)(n.code,{children:"sonar-project.properties"})," to ",(0,i.jsx)(n.code,{children:"sonar-project.properties.old"})," did not work for me."]})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);